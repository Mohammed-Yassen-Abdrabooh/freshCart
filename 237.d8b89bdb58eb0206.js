"use strict";(self.webpackChunkfreshCart=self.webpackChunkfreshCart||[]).push([[237],{2237:(f,m,s)=>{s.r(m),s.d(m,{CartComponent:()=>x});var d=s(6814),i=s(2012),_=s(1120),t=s(4769),p=s(9077);function l(c,g){if(1&c){const e=t.EpF();t.TgZ(0,"div",15)(1,"div",16)(2,"div",17),t._UZ(3,"img",18),t.qZA()(),t.TgZ(4,"div",19)(5,"div",20)(6,"div")(7,"h2",21),t._uU(8),t.ALo(9,"cuttext"),t.qZA(),t.TgZ(10,"p",22),t._uU(11),t.ALo(12,"currency"),t.qZA(),t.TgZ(13,"p",23,24),t.NdJ("click",function(){const a=t.CHM(e).$implicit,n=t.MAs(14),h=t.oxw(2);return t.KtG(h.deleteItem(a.product._id,n))}),t._UZ(15,"i",25),t._uU(16,"Remove"),t.qZA()(),t.TgZ(17,"div",26)(18,"button",27,28),t.NdJ("click",function(){const a=t.CHM(e).$implicit,n=t.MAs(19),h=t.MAs(24),b=t.oxw(2);return t.KtG(b.changeCount(a.count+1,a.product._id,n,h))}),t._UZ(20,"i",29),t.qZA(),t.TgZ(21,"p",30),t._uU(22),t.qZA(),t.TgZ(23,"button",27,31),t.NdJ("click",function(){const a=t.CHM(e).$implicit,n=t.MAs(19),h=t.MAs(24),b=t.oxw(2);return t.KtG(b.changeCount(a.count-1,a.product._id,n,h))}),t._UZ(25,"i",32),t.qZA()()()()()}if(2&c){const e=g.$implicit;t.xp6(3),t.Q6J("src",e.product.imageCover,t.LSH)("alt",e.product.title),t.xp6(5),t.Oqu(t.xi3(9,5,e.product.title,2)),t.xp6(3),t.Oqu(t.xi3(12,8,e.price,"EGP ")),t.xp6(11),t.Oqu(e.count)}}const v=function(c){return["/payment",c]};function u(c,g){if(1&c){const e=t.EpF();t.TgZ(0,"section",2)(1,"div",3)(2,"header",4)(3,"div")(4,"h2",5),t._uU(5,"Cart Shop"),t.qZA(),t.TgZ(6,"p",6),t._uU(7,"Total Price: "),t.TgZ(8,"span",7),t._uU(9),t.ALo(10,"currency"),t.qZA()()(),t.TgZ(11,"div",8)(12,"button",9),t._uU(13,"Check Out"),t.qZA(),t.TgZ(14,"p",6),t._uU(15,"Total Number of Items:"),t.TgZ(16,"span",7),t._uU(17),t.qZA()()()(),t.TgZ(18,"main",10),t.YNc(19,l,26,11,"div",11),t.qZA(),t.TgZ(20,"footer",12)(21,"button",13,14),t.NdJ("click",function(){t.CHM(e);const r=t.MAs(22),a=t.oxw();return t.KtG(a.clearUserCart(r))}),t._uU(23,"Clear Your Cart"),t.qZA()()()()}if(2&c){const e=t.oxw();t.xp6(9),t.hij(" ",t.xi3(10,4,e.cartData.totalCartPrice,"EGP ")," "),t.xp6(3),t.Q6J("routerLink",t.VKq(7,v,e.cartData._id)),t.xp6(5),t.hij(" ",e.noOfCartItems,""),t.xp6(2),t.Q6J("ngForOf",e.cartProductsArray)}}function C(c,g){1&c&&(t.TgZ(0,"section",33)(1,"div",34)(2,"h2",35),t._uU(3,"Cart Shop"),t.qZA(),t.TgZ(4,"h3",35),t._uU(5,"your cart is empty"),t.qZA()()())}let x=(()=>{class c{constructor(e,o){this._CartService=e,this._Renderer2=o,this.cartProductsArray=[]}ngOnInit(){this._CartService.getUserCart().subscribe({next:e=>{console.log("get User Cart Res",e),this.cartData=e.data,this.cartProductsArray=e.data.products,this.noOfCartItems=e.numOfCartItems},error:e=>{console.log("get User Cart err",e)}})}deleteItem(e,o){this._Renderer2.setAttribute(o,"disabled","true"),this._CartService.delSpecificCartItem(e).subscribe({next:r=>{console.log("delete item from cart res",r),this._Renderer2.removeAttribute(o,"disabled"),this.cartData=r.data,this.cartProductsArray=r.data.products,this.noOfCartItems=r.numOfCartItems,this._CartService.cartNumber.next(r.numOfCartItems)},error:r=>{console.log("delete item from cart err",r),this._Renderer2.removeAttribute(o,"disabled")}})}changeCount(e,o,r,a){e>=1?(this._Renderer2.setAttribute(r,"disabled","true"),this._Renderer2.setAttribute(a,"disabled","true"),this._Renderer2.setStyle(r,"cursor","not-allowed"),this._Renderer2.setStyle(a,"cursor","not-allowed"),this._CartService.updateCartQuantity(o,e).subscribe({next:n=>{console.log("Update Quantity Res",n),this.cartData=n.data,this.cartProductsArray=n.data.products,this.noOfCartItems=n.numOfCartItems,this._Renderer2.removeAttribute(r,"disabled"),this._Renderer2.removeAttribute(a,"disabled"),this._Renderer2.setStyle(r,"cursor","pointer"),this._Renderer2.setStyle(a,"cursor","pointer")},error:n=>{console.log("Update Quantity Err",n),this._Renderer2.removeAttribute(r,"disabled"),this._Renderer2.removeAttribute(a,"disabled"),this._Renderer2.setStyle(r,"cursor","pointer"),this._Renderer2.setStyle(a,"cursor","pointer")}})):this._CartService.delSpecificCartItem(o).subscribe({next:n=>{console.log("If Count Equal 0 Remove Item Res",n),this.cartData=n.data,this.cartProductsArray=n.data.products,this.noOfCartItems=n.numOfCartItems,this._CartService.cartNumber.next(n.numOfCartItems)},error:n=>{console.log("If Count Equal 0 Remove Item Err",n)}}),console.log(e)}clearUserCart(e){this._Renderer2.setAttribute(e,"disabled","true"),this._Renderer2.setStyle(e,"cursor","not-allowed"),this._CartService.clarUserCart().subscribe({next:o=>{console.log("Clear User Cart Res",o),"success"===o.message&&(this.cartData=null,this.cartProductsArray=null,this.noOfCartItems=null,this._CartService.cartNumber.next(0),this._Renderer2.removeAttribute(e,"disabled"),this._Renderer2.setStyle(e,"cursor","pointer"))},error:o=>{console.log("Clear User Cart Err",o),this._Renderer2.removeAttribute(e,"disabled"),this._Renderer2.setStyle(e,"cursor","pointer")}})}static#t=this.\u0275fac=function(o){return new(o||c)(t.Y36(p.N),t.Y36(t.Qsj))};static#e=this.\u0275cmp=t.Xpm({type:c,selectors:[["app-cart"]],standalone:!0,features:[t.jDz],decls:2,vars:2,consts:[["class","my-4 mx-1",4,"ngIf"],["class","m-4",4,"ngIf"],[1,"my-4","mx-1"],[1,"container","bg-main-light","my-4","rounded-4","p-sm-2","p-md-4","shadow-main"],[1,"d-flex","justify-content-between","align-items-center","p-2"],[1,"fw-semibold"],[1,"fw-bold","my-3"],[1,"text-main","fw-bolder"],[1,"text-end"],[1,"checkOut","shadow-main","border-main","rounded-pill","px-2","py-2",3,"routerLink"],[1,"my-4"],["class","row g-3 line py-3 align-items-center",4,"ngFor","ngForOf"],[1,"text-center"],[1,"border-danger","rounded-pill","shadow-danger","px-3","py-2","clear",3,"click"],["clear",""],[1,"row","g-3","line","py-3","align-items-center"],[1,"col-sm-4","col-md-2"],[1,""],[1,"w-100",3,"src","alt"],[1,"col-sm-8","col-md-10"],[1,"d-flex","justify-content-between","align-items-center"],[1,"h3","fw-bold"],[1,"small","mb-2","fw-bold"],["role","button",1,"remove","small",3,"click"],["btnRemove",""],[1,"fa-solid","me-1","fa-trash"],[1,"d-flex","justify-content-center","align-items-center"],[1,"plus","rounded-2","px-2","py-1","shadow-main","border-main",3,"click"],["btnPlus",""],[1,"fa-solid","fa-plus"],[1,"mb-0","mx-2","fw-bolder"],["btnMince",""],[1,"fa-solid","fa-minus"],[1,"m-4"],[1,"container","text-center","p-5","bg-main-light","rounded-4","shadow-main"],[1,"fw-bold"]],template:function(o,r){1&o&&(t.YNc(0,u,24,9,"section",0),t.YNc(1,C,6,0,"section",1)),2&o&&(t.Q6J("ngIf",null!=r.cartData&&0!=r.noOfCartItems),t.xp6(1),t.Q6J("ngIf",null==r.cartData||0==r.noOfCartItems))},dependencies:[d.ez,d.sg,d.O5,d.H9,i.r,_.rH],styles:[".remove[_ngcontent-%COMP%]{color:#dc3545}.clear[_ngcontent-%COMP%]{transition:.5s}.clear[_ngcontent-%COMP%]:hover{background-color:#dc3545;color:#fff;font-weight:700}.checkOut[_ngcontent-%COMP%]{transition:.5s}.checkOut[_ngcontent-%COMP%]:hover{background-color:#0aad0a;color:#fff;font-weight:700}.line[_ngcontent-%COMP%]{border-bottom:2px solid rgba(167,167,167,.6352941176)}"]})}return c})()},2012:(f,m,s)=>{s.d(m,{r:()=>i});var d=s(4769);let i=(()=>{class _{transform(p,l){return p.split(" ").slice(0,l).join(" ")}static#t=this.\u0275fac=function(l){return new(l||_)};static#e=this.\u0275pipe=d.Yjl({name:"cuttext",type:_,pure:!0,standalone:!0})}return _})()},9077:(f,m,s)=>{s.d(m,{N:()=>p});var d=s(5619),i=s(7587),_=s(4769),t=s(9862);let p=(()=>{class l{constructor(u){this._HttpClient=u,this.cartNumber=new d.X(0)}addToCart(u){return this._HttpClient.post(i.q.baseUrl+"cart",{productId:u})}getUserCart(){return this._HttpClient.get(i.q.baseUrl+"cart")}delSpecificCartItem(u){return this._HttpClient.delete(i.q.baseUrl+"cart/"+u)}updateCartQuantity(u,C){return this._HttpClient.put(i.q.baseUrl+"cart/"+u,{count:C})}clarUserCart(){return this._HttpClient.delete(i.q.baseUrl+"cart")}static#t=this.\u0275fac=function(C){return new(C||l)(_.LFG(t.eN))};static#e=this.\u0275prov=_.Yz7({token:l,factory:l.\u0275fac,providedIn:"root"})}return l})()},7587:(f,m,s)=>{s.d(m,{q:()=>d});var d=function(i){return i.baseUrl="https://ecommerce.routemisr.com/api/v1/",i}(d||{})}}]);