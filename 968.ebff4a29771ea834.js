"use strict";(self.webpackChunkfreshCart=self.webpackChunkfreshCart||[]).push([[968],{7968:(x,m,a)=>{a.r(m),a.d(m,{PaymentComponent:()=>C});var d=a(6814),n=a(95),t=a(4769),l=a(1120),c=a(7587),p=a(9862);let u=(()=>{class o{constructor(e){this._HttpClient=e}checkOut(e,r){return this._HttpClient.post(c.q.baseUrl+`orders/checkout-session/${e}?url=https://mohammed-yassen-abdrabooh.github.io/freshCart`,{shippingAddress:r})}static#t=this.\u0275fac=function(r){return new(r||o)(t.LFG(p.eN))};static#o=this.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"})}return o})();function f(o,s){1&o&&(t.TgZ(0,"p",14),t._uU(1,"Details Is Required"),t.qZA())}function h(o,s){if(1&o&&(t.TgZ(0,"div",12),t.YNc(1,f,2,0,"p",13),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.orderForm.controls.details.getError("required"))}}function g(o,s){1&o&&(t.TgZ(0,"p",14),t._uU(1,"Phone Number Is Required"),t.qZA())}function y(o,s){1&o&&(t.TgZ(0,"p",14),t._uU(1,"Write a Valid EGP Phone Number "),t.qZA())}function b(o,s){if(1&o&&(t.TgZ(0,"div",12),t.YNc(1,g,2,0,"p",13),t.YNc(2,y,2,0,"p",13),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.orderForm.controls.phone.getError("required")),t.xp6(1),t.Q6J("ngIf",e.orderForm.controls.phone.getError("pattern"))}}function v(o,s){1&o&&(t.TgZ(0,"p",14),t._uU(1,"City Is Required"),t.qZA())}function _(o,s){if(1&o&&(t.TgZ(0,"div",12),t.YNc(1,v,2,0,"p",13),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngIf",e.orderForm.controls.city.getError("required"))}}function Z(o,s){if(1&o&&(t.TgZ(0,"button",15),t._uU(1,"Pay Now"),t.qZA()),2&o){const e=t.oxw();t.Q6J("disabled",e.orderForm.invalid)}}function I(o,s){1&o&&(t.TgZ(0,"button",16),t._UZ(1,"i",17),t.qZA())}let C=(()=>{class o{constructor(e,r){this._ActivatedRoute=e,this._PaymentService=r,this.cartId="",this.isLoading=!1,this.orderForm=new n.cw({details:new n.NI("",[n.kI.required]),phone:new n.NI("",[n.kI.required,n.kI.pattern(/^01[0125][0-9]{8}$/)]),city:new n.NI("",[n.kI.required])})}ngOnInit(){this._ActivatedRoute.paramMap.subscribe({next:e=>{console.log("Cart Id which comming to Payment Rse",e),this.cartId=e.get("id")}})}handleForm(){this.isLoading=!0,this._PaymentService.checkOut(this.cartId,this.orderForm.value).subscribe({next:e=>{console.log("Pay Now Res",e),this.isLoading=!1,"success"==e.status&&window.open(e.session.url,"_self")},error:e=>{console.log("Pay Now Err",e),this.isLoading=!1}})}static#t=this.\u0275fac=function(r){return new(r||o)(t.Y36(l.gz),t.Y36(u))};static#o=this.\u0275cmp=t.Xpm({type:o,selectors:[["app-payment"]],standalone:!0,features:[t.jDz],decls:18,vars:6,consts:[[1,"py-5","m-5"],[1,"container"],[1,"w-75","mx-auto","rounded-4","shadow-main","p-4"],[3,"formGroup","ngSubmit"],["for","",1,"my-2","fw-semibold"],["formControlName","details","type","text","placeholder","Details...",1,"form-control"],["class","alert alert-danger p-2",4,"ngIf"],["formControlName","phone","type","tel","placeholder","Phone...",1,"form-control"],["class","alert alert-danger p-2 ",4,"ngIf"],["formControlName","city","type","text","placeholder","City...",1,"form-control"],["type","submit","class","rounded-pill border-main shadow-main mt-3 py-2 px-4 d-block m-auto w-50",3,"disabled",4,"ngIf"],["type","button","class","rounded-pill border-main shadow-main mt-3 py-2 px-4 m-auto w-50 d-block",4,"ngIf"],[1,"alert","alert-danger","p-2"],["class","mb-0 small",4,"ngIf"],[1,"mb-0","small"],["type","submit",1,"rounded-pill","border-main","shadow-main","mt-3","py-2","px-4","d-block","m-auto","w-50",3,"disabled"],["type","button",1,"rounded-pill","border-main","shadow-main","mt-3","py-2","px-4","m-auto","w-50","d-block"],[1,"fas","fa-spinner","fa-spin"]],template:function(r,i){1&r&&(t.TgZ(0,"section",0)(1,"div",1)(2,"div",2)(3,"form",3),t.NdJ("ngSubmit",function(){return i.handleForm()}),t.TgZ(4,"label",4),t._uU(5,"Details :"),t.qZA(),t._UZ(6,"input",5),t.YNc(7,h,2,1,"div",6),t.TgZ(8,"label",4),t._uU(9,"Phone Number:"),t.qZA(),t._UZ(10,"input",7),t.YNc(11,b,3,2,"div",8),t.TgZ(12,"label",4),t._uU(13,"City :"),t.qZA(),t._UZ(14,"input",9),t.YNc(15,_,2,1,"div",6),t.YNc(16,Z,2,1,"button",10),t.YNc(17,I,2,0,"button",11),t.qZA()()()()),2&r&&(t.xp6(3),t.Q6J("formGroup",i.orderForm),t.xp6(4),t.Q6J("ngIf",i.orderForm.controls.details.errors&&i.orderForm.controls.details.touched),t.xp6(4),t.Q6J("ngIf",i.orderForm.controls.phone.errors&&i.orderForm.controls.phone.touched),t.xp6(4),t.Q6J("ngIf",i.orderForm.controls.city.errors&&i.orderForm.controls.city.touched),t.xp6(1),t.Q6J("ngIf",!i.isLoading),t.xp6(1),t.Q6J("ngIf",i.isLoading))},dependencies:[d.ez,d.O5,n.UX,n._Y,n.Fj,n.JJ,n.JL,n.sg,n.u]})}return o})()}}]);